China's parliament approved plans Thursday to impose a security law on Hong Kong that has ratcheted up tensions with the US and sparked new protests over fears the city is losing its special freedoms. The vote by the rubber-stamp National People's Congress (NPC) came hours after the United States revoked the special status conferred on Hong Kong, paving the way for the territory to be stripped of trading and economic privileges. US Secretary of State Mike Pompeo said the status had been withdrawn because China was no longer honouring its handover agreement with Britain to allow Hong Kong a high level of autonomy. "No reasonable person can assert today that Hong Kong maintains a high degree of autonomy from China," Pompeo said. China made the security law a priority at its annual NPC session, after huge pro-democracy protests rocked the financial hub for seven months last year. The law would punish secession, subversion of state power, terrorism and acts that endanger national security, as well as allow mainland security agencies to operate openly in Hong Kong. On Thursday, the final day of the congress, delegates endorsed plans for the law with an almost unanimous vote and enthusiastic applause. Li Zhanshu -- the chairman of the NPC Standing Committee which will now draft the law -- said the move was "in line with the fundamental interests of all Chinese people, including Hong Kong compatriots". Hong Kong's embattled leader, Carrie Lam, said she welcomed the resolution being passed. As required in the resolution, Lam said she would submit regular reports to Beijing and "step up law enforcement and public education for safeguarding national security". But the law has met fierce criticism. "It's the end of Hong Kong.... They are cutting off our souls, taking away the values which we've always embraced, values like human rights, democracy, rule of law," pro-democracy lawmaker Claudia Mo told AFP. Joshua Wong, a prominent pro-democracy activist, told AFP the security law "will kill Hong Kong's democratic movements". NPC Standing Committee Vice Chairman Wang Chen said last week that Hong Kong's delays in implementing its own security law had forced the Chinese leadership to take action. - US action - Under a US law passed last year aimed at supporting Hong Kong's pro-democracy movement, Washington must certify that Hong Kong still enjoys the promises of freedom made by Beijing when it negotiated with Britain to take back the colony. But Beijing's proposed security law "lies in direct conflict" with those commitments and put China in violation of its international obligations, the US and Britain said in a joint statement with allies Canada and Australia on Thursday. A day earlier Washington signalled that the city could lose its trading privileges -- including lower tariffs than the mainland -- with the world's largest economy. US President Donald Trump will ultimately decide which actions to take, said David Stilwell, the top State Department official for East Asia. He said the United States did not want to hurt the people of Hong Kong, adding: "This decision was made by the government in Beijing, and not by the US." China's foreign ministry office in the financial hub said Thursday that the US revoking Hong Kong's special status was "the most barbaric, the most unreasonable and the most shameless". - Anthem law - Washington's move came after fresh protests broke out in Hong Kong on Wednesday over another controversial proposed law that criminalises insults to the national anthem. Police fired pepper ball rounds at protesters and arrested more than 300 people, mostly for unlawful assembly. "It's like a de facto curfew now," Nathan Law, a prominent pro-democracy advocate, told AFP. "I think the government has to understand why people are really angry." Under the "one country, two systems" model agreed before the city's return from Britain to China, Hong Kong is supposed to be guaranteed certain liberties until 2047 that are denied to those on the mainland. The mini-constitution that has governed Hong Kong's affairs since the handover obliges the territory's authorities to enact national security laws. But an effort to do so in 2003 was shelved after huge protests by Hong Kongers. China is motivated by fear of a younger Hong Kong generation that "does not agree with the political system of the Communist Party," said Hua Po, an independent political commentator based in Beijing. "If they lose control over Hong Kong, the impact on the Chinese mainland will be huge," Hua said.