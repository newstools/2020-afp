A ceasefire in northern Syria agreed between Russia and Turkey came into force on Friday, aiming to halt intense fighting that has sparked a humanitarian disaster and raised fears of their armies clashing. The deal struck between Russian President Vladimir Putin and Turkish counterpart Recep Tayyip Erdogan comes after an escalation of violence in Idlib, the northwestern province of Syria where Ankara is battling Moscow-backed government forces. Nearly a million civilians have fled their homes due to the bloodshed and dozens of Turkish soldiers have been killed. Putin and Erdogan agreed on the ceasefire from midnight on Friday (2200 GMT) after more than six hours of talks in Moscow. UN Secretary-General Antonio Guterres "hopes that this agreement will lead to an immediate and lasting cessation of hostilities that ensures the protection of civilians in northwest Syria", his spokesman said in a statement Thursday. The Syrian Observatory for Human Rights war monitor, which had reported bombings just minutes before the midnight deadline, said there was "relative" calm in the region after the ceasefire came into operation. The Britain-based Observatory reported that Russian and Syrian air strikes had halted but said there was "artillery fire... by Syrian regime forces on the positions of insurgent groups" in areas controlled by jihadists in parts of Aleppo and Hama bordering Idlib. The situation in Idlib, the last rebel stronghold in Syria's nine-year civil war, had become critical as Ankara for the first time launched a direct offensive against President Bashar al-Assad's forces. Earlier, Putin told a joint press conference that the agreement would "serve as a good basis for ending fighting" in Idlib. Erdogan, however, added that Turkey reserved the right to "retaliate with all its strength against any attack" by Damascus. The agreement will also create a security corridor along the key M4 highway in northern Syria, where Turkish and Russian forces will launch joint patrols from March 15. But there was scepticism over the deal among those displaced by the fighting. "I don't think this will last long," Mouawiya Agha, originally from Sarmin in the south of the province, told AFP. "It will end like the ones before," said the 33-year-old father of four, referring to an agreement reached in the Russian city of Sochi in 2018 that created a "de-escalation" zone in Idlib. - More Turkish soldiers killed - Turkey has long backed certain rebel groups against Assad but its priority now is to stop an influx of refugees among those fleeing an offensive the regime has been pressing on Idlib since December. Ankara has demanded the European Union support its actions in Syria and last week opened its border with EU member Greece to migrants -- a move decried by some in the bloc as "blackmail". In the run-up to Thursday's talks, Russia and Turkey had traded accusations of violating the deal. Ankara said Russia was not fulfilling part of the agreement that guaranteed no attacks on Idlib and the status quo on the ground. Moscow, in turn, said Turkey was breaching the agreement by supporting "illegal armed groups" and accused Turkish forces of mingling with "terrorists" in Idlib. Turkey officially declared an operation against the Assad government over the weekend, after 34 Turkish soldiers died in an air strike blamed on Damascus. It has since downed three Syrian warplanes and killed dozens of soldiers and allied fighters, according to monitors. Two more Turkish soldiers were killed by Syrian regime fire in Idlib, the defence ministry said, just hours before the ceasefire took effect. - Migrants mass on border - The deal leaves open the fate of the Turkish observation posts in Idlib, which have been surrounded since Damascus launched its offensive. But it does mark the first time Russian and Turkish forces will operate jointly in Idlib. The security corridor along the M4 highway, which connects second city Aleppo to the coast through Idlib, will run six kilometres (around four miles) deep both north and south of the highway. The joint Russian-Turkish patrols will operate between the town of Tronba in Idlib and a village in Latakia province, a regime stronghold. Fighting continued elsewhere in Idlib on Thursday, with Russian air strikes killing at least 15 civilians gathered outside the town of Maaret Misrin, the Observatory said. Erdogan warned Europe on Wednesday that it must support Turkey's "political and humanitarian solutions in Syria" if it wants to avoid a repeat of the 2015 migration crisis. Thousands of migrants have massed at the Turkish-Greek border since Erdogan gave them the green light to try to enter Europe, leading to clashes with Greek police. Turkey hosts roughly 3.6 million refugees from Syria -- and hundreds of thousands from elsewhere -- and Erdogan's move has sparked concern in Europe of a renewed influx of migrants.