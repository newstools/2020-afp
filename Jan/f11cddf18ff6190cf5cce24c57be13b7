A furious Iran threatened to avenge a US strike that killed a top Iranian commander at Baghdad's international airport Friday, raising fears of a wider regional conflict between the arch-foes. The Pentagon said US President Donald Trump had ordered Qasem Soleimani's "killing" after a pro-Iran mob this week laid siege to the US embassy in the Iraqi capital. Iran's supreme leader Ayatollah Ali Khamenei swiftly promised "severe revenge" for Soleimani's death, the biggest escalation yet in a feared proxy war between Iran and the US on Iraqi soil. Tens of thousands of angry Iranians took to the streets of Tehran chanting "Death to America" and holding up posters of Soleimani. As the US embassy in Baghdad urged all American citizens to leave Iraq "immediately", Trump tweeted a picture of the US flag without any comment. Early Friday, a volley of missiles struck a convoy at Baghdad's international airport belonging to the Hashed al-Shaabi, an Iraqi paramilitary force with close ties to Iran. Hours later, Iran's Revolutionary Guard Corps announced Soleimani "was martyred in an attack by America". Security sources said that nine people died in the strike, which a US defence official told AFP had been carried out by a drone. The Hashed confirmed both Soleimani and its deputy chief Abu Mahdi al-Muhandis were among those killed. The Hashed is a network of mostly Shiite armed units, many of whom have close ties to Tehran but which have been officially incorporated into Iraq's state security forces. A leading Hashed member, Hadi al-Ameri, said the attack would "only make us more determined." The network said "Iranian advisers" were among those killed but did not specify how many. - 'Dangerous escalation' - Soleimani headed the Islamic Revolutionary Guard Corps' Quds Force foreign operations arm and also served as Iran's pointman on Iraq, visiting the country in times of turmoil. Khamenei swiftly named Quds Force number two Esmail Qaani to replace him. Muhandis was the Hashed's deputy chief, but was widely recognised as the real shot-caller within the group. Both were targeted by US sanctions. The pair will be buried on Saturday, and Iraq's parliament is set to hold an emergency meeting on the strike on the same day. Ameri urged lawmakers "to take a bold decision to oust foreign troops from Iraq, because their presence has become a threat for Iraqis." The Pentagon said Soleimani had been "actively developing plans to attack American diplomats and service members in Iraq and throughout the region". It said it took "decisive defensive action to protect US personnel abroad by killing Qasem Soleimani," but did not specify how. Iran's Foreign Minister Mohammad Javad Zarif slammed the US strike as "extremely dangerous and a foolish escalation," as Khamenei declared three days of mourning. Iraqi prime minister Adel Abdel Mahdi said the strike was a "flagrant violation" of a security accord with the US, warning it would "spark a devastating war in Iraq". Iraqi President Barham Saleh called for "restraint" -- an appeal echoed by alarmed foreign governments. A paramilitary group, Asaib Ahl al-Haq, urged its fighters to be on high alert while militiaman-turned-populist politician Moqtada Sadr reactivated his Mahdi Army, nearly a decade after dissolving the notoriously anti-American force. And in Lebanon, the leader of the Tehran-backed Hezbollah, Hassan Nasrallah, warned of "punishment for these criminal assassins", although the Shiite movement denied any of its commanders were killed. But there were daring celebrations in Baghdad's Tahrir Square, the epicentre of a three-month-old protest movement that has slammed the Iraqi government as corrupt and beholden to Tehran. "Oh Qasem Soleimani, this is a divine victory," demonstrators chanted as some danced in the streets. - 'Decapitation strike' - Analysts said the strike -- which sent world oil prices soaring -- would be a game-changer in the tensions between Iran and the US. "Trump changed the rules -â€” he wanted (Soleimani) eliminated," said Ramzy Mardini, a researcher at the US Institute of Peace. Phillip Smyth, a US-based specialist in Shiite armed groups, described the strike as "the most major decapitation strike that the US has ever pulled off". He told AFP it would have "bigger" ramifications than the 2011 US operation that killed Al-Qaeda chief Osama bin Laden and the 2019 American raid that killed Islamic State group Abu Bakr al-Baghdadi. As fears of a regional conflagration grew, Yemen's pro-Tehran Huthi rebels -- who have launched a string of missile attacks on Iran's regional rival Saudi Arabia -- called for "swift reprisals" for Soleimani's death. Ties between the US and Iran have deteriorated markedly since Washington pulled out of a landmark nuclear deal with Tehran in 2018 and reimposed crippling sanctions. An unprecedented attack this week on the US mission in Baghdad sent tensions soaring again. A mob of Hashed supporters surrounded the US embassy on Tuesday angered by American air strikes that killed 25 fighters from the network's hardline Iran-backed Kataeb Hezbollah faction. The US had acted in response to a rocket attack days earlier that had killed an American contractor working in Iraq. Trump had blamed Iran for a spate of rocket attacks targeting US forces as well as the embassy siege, saying: "They will pay a very BIG PRICE! This is not a Warning, it is a Threat." But the Democrats' presidential frontrunner Joe Biden warned that Trump had "just tossed a stick of dynamite into a tinderbox".